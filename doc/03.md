# 第三次実験報告書

## 1. はじめに
本報告書は、「Project RealizeSLAM AR」の第三次実証実験の成果をまとめたものである。第一回では空間配置と意味軸の初期検証を行い、第二回ではTDA（Topological Data Analysis）を用いた意味軸の抽出と分類精度の評価を実施した。

第三回となる本実験では、照合器「SigmaSense」を用いて、照合不能群の臨界構造記述と圏論的変換理論に基づく関手性の検証を中心に据えた。
目的は、意味空間における構造保存的な照合と応答生成が可能かどうかを、実際の幾何画像群を通じて検証することである。

SigmaSenseは、形状・色・照明・文脈・群化構造などの意味軸を統合した照合器であり、意味ベクトルを生成し、照合スコアと応答文を構造的に出力する。さらに、照合不能群に対しては再構成処理を行い、意味空間の断絶点を記録する機能を持つ。

本報告書では、実験対象画像、照合結果、臨界構造の抽出、関手性検証の結果を順に示し、SigmaSenseが「意味の構造を誠実に扱う存在」として機能するかを明らかにする。

## 2. 照合器の理論構造
SigmaSenseは、意味空間における照合と応答生成を行うために設計された構造保存的照合器である。その設計思想は、以下の五つの理論に基づいている。

### 2.1 意味照合理論
対象画像から生成された意味ベクトルと、意味データベースに登録されたベクトル群との照合を行う。照合には重み付きコサイン類似度を用い、類似度スコアに基づいて照合候補を分類・応答する。

### 2.2 情報理論
意味ベクトルのエントロピーとスパース度を計算し、情報密度を評価する。情報密度が低い場合、照合不能の可能性が高いため、再構成トリガーが発火し、ベクトル補完処理が行われる。

### 2.3 構造抽出理論
対象画像から抽出される形状・照明・空間配置・群化構造などの特徴を、意味軸としてベクトル化する。これにより、照合器は対象の構造的意味を捉えることができる。

### 2.4 圏論的変換理論
意味ベクトルから応答文への写像が構造保存的かどうかを検証する。**SigmaFunctor**はこの写像を担う関手として設計されており、恒等射や合成写像に対する関手性の検証が可能である。

### 2.5 補助理論
文脈配置、空間関係、局所色構造、照明、群化などの補助的な意味軸が、照合器の応答生成に寄与する。これらは主軸に対する補完的な構造として扱われる。

## 3. 実験環境と対象
本実験では、幾何的構造を持つ10種類の画像を用いて、SigmaSenseの照合性能と構造保存性を検証した。

### 3.1 実験対象画像一覧

| 画像名                 | 形状     | 色   | 配置   | 特徴的意味軸              |
|-------------------------|----------|------|--------|---------------------------|
| circle_center.jpg       | 円       | 黒   | 中央   | 円形度・文脈スコア        |
| circle_center_red.jpg   | 円       | 赤   | 中央   | 色軸・照明軸              |
| square_left.jpg         | 四角形   | 黒   | 左寄り | 空間距離・文脈配置        |
| triangle_top.jpg        | 三角形   | 黒   | 上部   | 文脈スコア・頂点数        |
| pentagon_center.jpg     | 五角形   | 黒   | 中央   | 頂点数・群化構造          |
| pentagon_center_blue.jpg| 五角形   | 青   | 中央   | 色軸・形状軸              |
| hexagon_center.jpg      | 六角形   | 黒   | 中央   | 頂点数・円形度            |
| star_five.jpg           | 五光星   | 黒   | 中央   | エッジ密度・群化構造      |
| line_vertical.jpg       | 垂直線   | 黒   | 中央   | アスペクト比・照明軸      |
| curve_arc.jpg           | 半円弧   | 黒   | 中央   | 円形度・空間構造          |

### 3.2 意味ベクトル生成
各画像は、SigmaSenseによって15次元ベクトル化された：

群サイズ、明るさ、陰影強度、色集中度、空間距離、包含率、文脈スコア
アスペクト比、凸性、エッジ密度、頂点数、円形度
dominant_color_r, dominant_color_g, dominant_color_b

## 4. 照合結果の分析

### 4.1 照合スコアと分類傾向
分類基準:

- **Strong Match**：スコア > 0.9
- **Potential Match**：0.8 < スコア ≤ 0.9
- **Weak Analogy**：0.7 < スコア ≤ 0.8
- **Unrelated**：スコア ≤ 0.7

→ 円形・中央配置・明確な色成分を持つ画像は高スコアを得やすく、非対称配置や複雑な形状は難易度が高い。

### 4.2 再構成トリガー
再構成条件:

- エントロピー < 2.5
- スパース度 > 0.4

発火例:
- `line_vertical.jpg` → アスペクト比極端
- `curve_arc.jpg` → 半円弧が円形度と不一致
- `square_left.jpg` → 中心ズレで文脈スコア低下

### 4.3 臨界構造レポート
照合不能群で抽出された臨界軸:

- 色集中度（中央以外で低下）
- 空間距離・文脈スコア（配置ズレ）
- 頂点数・円形度（複雑形状で限界）

## 5. 関手性検証

### 5.1 方法
- **画像変換器**：赤色化、グレースケール化、回転、恒等射
- **ベクトル変換器**：仮説に基づく意味軸変換
- **比較**：`np.allclose` (誤差許容0.15)

### 5.2 結果

| 画像                   | 変換          | 判定           | 差分 |
|-------------------------|---------------|----------------|------|
| circle_center_red.jpg   | 恒等射        | ✅ 一貫性あり | 0.0000 |
| pentagon_center.jpg     | 赤色化        | ✅ 一貫性あり | 0.0412 |
| circle_center_red.jpg   | グレースケール| ✅ 一貫性あり | 0.0587 |
| pentagon_center.jpg     | 赤色化 → 回転 | ❗ 不一致      | 0.2314 |

### 5.3 考察
- 単一変換 → 高一致率（構造保存的写像を実現）
- 合成変換 → 意味軸干渉（特にアスペクト比と色軸）

## 6. 考察と今後の展望

### 6.1 照合器の象徴性
- 構造保存的照合の部分実証
- 意味空間の折れ目（臨界構造）の抽出
- 再構成力＝「意味の再発芽」

### 6.2 今後の進化
1. **Neurosymbolic AI への昇華**
   - 構造保存性（シンボリック）＋柔軟性（ニューラル）

2. **言語・記号・動物の照合**
   - 文字・言葉・動物・記号の意味ベクトル化と応答検証

3. **意味空間の再設計**
   - 臨界構造分布をもとに意味軸再定義・重み再調整

## 7. 付録

### 7.1 意味ベクトル定義一覧
3次元の意味ベクトル構成 (モバイル最適化版):

- symmetry_score (Huモーメントに基づく対称性)
- edge_density (エッジの密度)
- gaze_curvature (主要な線の曲率)

### 7.2 照合ログ抜粋
```json
{
  "image": "circle_center_red.jpg",
  "query_vector": [0.0, 0.82, 0.03, 0.94, 0.0, 0.0, 0.98, 1.0, 1.0, 0.12, 0.2, 0.89, 0.98, 0.02, 0.01],
  "entropy": 2.31,
  "sparsity": 0.13,
  "reconstructed": false,
  "matches": [
    {
      "matched_id": "red_circle",
      "score": 0.9421,
      "classification": "Strong Match",
      "response": "分類: Strong Match。類似度 0.9421 に基づき照合。\n情報密度: エントロピー=2.31, スパース度=0.13\n色構造: dominant=[0.98, 0.02, 0.01], 集中度=0.94\n空間関係: 距離=0.0, 包含率=0.0\n文脈配置: 中心距離=0.98"
    }
  ]
}
```
### 7.3 関手性検証詳細
```json
{
  "image": "pentagon_center.jpg",
  "transforms": ["add_red_tint", "rotate_90"],
  "consistent": false,
  "lhs": [0.0, 0.71, 0.04, 0.91, 0.0, 0.0, 0.97, 0.8, 0.92, 0.15, 0.5, 0.81, 0.95, 0.03, 0.02],
  "rhs": [0.0, 0.72, 0.04, 0.91, 0.0, 0.0, 0.97, 1.25, 0.92, 0.15, 0.5, 0.81, 0.95, 0.03, 0.02],
  "diff": 0.2314
}
```
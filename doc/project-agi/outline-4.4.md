# Phase 4.4: 長期計画能力の獲得 (Acquiring Long-term Planning)

## 関連Issue (Associated Issues)
- [#153](https://github.com/MicrocomputerTechnology/SigmaSenseJp/issues/153): AGI基盤としての長期目標達成のためのプランニング機能の追加

## 1. 設計目標 (Design Goals)
- SigmaSenseがAGIとして、自律的に長期的な目標を設定し、それを達成するための多段階の行動計画を立案・実行・監視する能力を獲得する。
- 受動的な情報処理から、能動的なタスク達成エージェントへと進化させる。

## 2. 設計概要 (Design Overview)
- **目標管理モジュール (`GoalManager`) の新設:**
  - 長期的・短期的な目標を階層構造で管理する。目標の設定、優先順位付け、状態（未達成, 進行中, 達成済, 失敗）の追跡機能を提供する。
  - 外部からの指示や内部的な欲求に基づいて、新しい目標を生成するメカニズムを設計する。

- **計画立案モジュール (`Planner`) の新設:**
  - `GoalManager`から目標を受け取り、それを達成するための行動計画（ステップのシーケンス）を生成する。
  - `causal_discovery`（因果関係）や`symbolic_reasoner`（世界のルール）と連携し、現実的かつ効率的な計画を立案する。Hierarchical Task Network (HTN) やSTRIPSのような古典的なプランニング手法を参考に、動的な世界モデル（#150）と連携させる。

- **行動実行モジュール (`ActionExecutor`) の新設:**
  - `Planner`が生成した計画の各ステップを、`sigma_reactor`や他の既存モジュールを呼び出して実行する。
  - 具体的なアクション（内部的な思考、情報検索、外部API連携など）を抽象化し、実行可能な形式に変換する。

- **計画監視・再計画モジュール (`PlanMonitor`) の新設:**
  - 計画の実行状況をリアルタイムで監視し、予期せぬ問題（前提条件の変化、アクションの失敗など）が発生した場合に`Planner`に再計画を要求する。
  - 実行中の計画と実際の環境状態との乖離を検出し、適応的な行動を促す。

## 3. 主要な課題と検討事項 (Key Challenges & Considerations)
- **目標の階層化と分解:** 複雑な長期目標を、実行可能な短期目標やサブタスクに適切に分解するメカニズム。
- **不確実性下のプランニング:** 現実世界は不確実性に満ちているため、不確実性を考慮したロバストな計画立案手法が必要となる。
- **計算コストと応答速度:** 複雑な計画立案は計算コストが高く、リアルタイムでの再計画が求められる場面もあるため、効率的なアルゴリズムとリソース管理が重要となる。

## 4. 期待される成果 (Expected Outcome)
- 「Xについて調査し、Yの形式で報告する」といった複雑なマルチステップタスクの自律実行能力。
- より長期的で複雑な目標を持つエージェントの実現。
- AGIとしての自律性と能動性の飛躍的な向上。
